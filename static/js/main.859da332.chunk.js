(this["webpackJsonpsubstrate-front-end-template"]=this["webpackJsonpsubstrate-front-end-template"]||[]).push([[0],{485:function(e){e.exports=JSON.parse('{"APP_NAME":"substrate-front-end-tutorial","DEVELOPMENT_KEYRING":true,"RPC":{}}')},536:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://dev-node.substrate.dev"}')},537:function(e){e.exports=JSON.parse('{"GiftInfo":{"gifter":"AccountId","deposit":"Balance","amount":"Balance"}}')},546:function(e,t){},567:function(e,t){},585:function(e,t){},588:function(e,t){},590:function(e,t){},600:function(e,t){},602:function(e,t){},632:function(e,t){},634:function(e,t){},641:function(e,t){},642:function(e,t){},738:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(178),o=n.n(r),i=n(35),s=n(15),l=n.n(s),u=n(29),d=n(3),j=n(813),b=n(801),O=n(800),f=n(200),p=n(807),g=n(795),x=n(809),h=n(810),m=n(803),E=n(802),v=n(353),y=n(484),k=n.n(y),S=n(375),C=n(379),R=n(315),N=n.n(R),w=n(485),_=n(536),T=n(537),A=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/dotdrop",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/dotdrop",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),P=Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},w),_),A),{},{types:T}),I=n(21),D=k.a.parse(window.location.search).rpc||P.PROVIDER_SOCKET;console.log("Connected socket: ".concat(D));var G={socket:D,jsonrpc:Object(i.a)(Object(i.a)({},v.default),P.RPC),types:P.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},H=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(i.a)(Object(i.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(i.a)(Object(i.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(i.a)(Object(i.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(i.a)(Object(i.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(i.a)(Object(i.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(i.a)(Object(i.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},K=!1,Y=c.a.createContext(),B=function(e){var t=Object(i.a)({},G);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(a.useReducer)(H,t),c=Object(d.a)(n,2),r=c[0],o=c[1];return function(e,t){var n=e.apiState,a=e.socket,c=e.jsonrpc,r=e.types;if(!n){t({type:"CONNECT_INIT"});var o=new S.WsProvider(a),i=new S.ApiPromise({provider:o,types:r,rpc:c});i.on("connected",(function(){t({type:"CONNECT",payload:i}),i.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),i.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),i.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(r,o),function(e,t){var n=function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(C.web3Enable)(P.APP_NAME);case 4:return e.next=6,Object(C.web3Accounts)();case 6:n=(n=e.sent).map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(i.a)(Object(i.a)({},n),{},{name:"".concat(n.name," (").concat(n.source,")")})}})),N.a.loadAll({isDevelopment:P.DEVELOPMENT_KEYRING},n),t({type:"SET_KEYRING",payload:N.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(K)return t({type:"SET_KEYRING",payload:N.a});K=!0,n()}}(r,o),Object(I.jsx)(Y.Provider,{value:r,children:e.children})},L=function(){return Object(i.a)({},Object(a.useContext)(Y))};function U(e){var t=e.setAccountAddress,n=L().keyring,c=Object(a.useState)(""),r=Object(d.a)(c,2),o=r[0],i=r[1],s=n.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}})),l=s.length>0?s[0].value:"";Object(a.useEffect)((function(){t&&t(l),i(l)}),[t,l]);return Object(I.jsx)(f.a,{children:Object(I.jsx)(E.a,{options:s,value:o,valueKey:{key:"value",reduce:!0},labelKey:"text",children:function(e,t,n,a){return Object(I.jsx)(f.a,{children:e.text})},onChange:function(e){var n,a=e.value;return n=a,t&&t(n),void i(n)},size:"small"})})}function z(e){var t=L(),n=t.api,a=t.keyring;return(null===a||void 0===a?void 0:a.getPairs)&&(null===n||void 0===n?void 0:n.query)?Object(I.jsx)(U,Object(i.a)({},e)):null}function F(e){var t=e.loginHandler;return Object(I.jsxs)(g.a,{children:[Object(I.jsx)(f.a,{height:"5rem",width:"5rem",children:Object(I.jsx)(x.a,{src:"".concat("/dotdrop","/assets/Polkadot_symbol_color.png")})}),Object(I.jsxs)(f.a,{direction:"row",gap:"small",children:[Object(I.jsx)(h.a,{background:"brand",children:Object(I.jsx)(m.a,{})}),Object(I.jsx)(z,{setAccountAddress:t})]})]})}var J=n(796),V=n(797),W=n(811),M=n(798),q=n(799),Q=n(808),X=n(805),Z=n(804),$=n(812);function ee(e){var t=e.generateGiftHandler,n=e.claimGiftHandler,r=Object(a.useState)(""),o=Object(d.a)(r,2),i=o[0],s=o[1],l=Object(a.useState)(""),u=Object(d.a)(l,2),j=u[0],b=u[1],O=Object(a.useState)(""),p=Object(d.a)(O,2),g=p[0],h=p[1],m=c.a.useContext(J.a);return Object(I.jsx)(f.a,{align:"center",children:Object(I.jsxs)(V.a,{align:"center",height:"100%",children:[Object(I.jsx)(W.a,{level:"1",children:"Dots are Awesome!"}),Object(I.jsxs)(f.a,{align:"center",children:[Object(I.jsx)(W.a,{level:"3",textAlign:"center",children:"Send some gifts to your friends and family and have them join polkadot network!"}),Object(I.jsx)(M.a,{background:"light-1",children:Object(I.jsxs)(q.a,{pad:"medium",direction:"row",gap:"medium",children:["small"!=m?Object(I.jsx)(M.a,{height:"small",width:"medium",justify:"center",children:Object(I.jsx)(x.a,{src:"".concat("/dotdrop","/assets/Polkadot_Logotype_color.png"),width:"100%"})}):null,Object(I.jsxs)(f.a,{width:"small"==m?"100%":"60%",children:[Object(I.jsxs)(f.a,{children:[Object(I.jsx)(Q.a,{children:"Gift value:"}),Object(I.jsx)(X.a,{placeholder:"10",value:i,onChange:function(e){!function(e){s(e)}(e.target.value)}})]}),Object(I.jsxs)(f.a,{children:[Object(I.jsx)(Q.a,{children:"To who:"}),Object(I.jsx)(X.a,{placeholder:"Bob",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(I.jsx)(Z.a,{primary:!0,label:"Generate",margin:{top:"xsmall"},alignSelf:"end",onClick:function(){t({amount:i,name:j,email:""})}})]})]})})]}),Object(I.jsxs)(f.a,{children:[Object(I.jsx)(W.a,{level:"3",textAlign:"center",children:"Claim your gifts that you've recieved!"}),Object(I.jsx)(f.a,{margin:{bottom:"10px"},children:Object(I.jsx)($.a,{fill:!0,value:g,onChange:function(e){return h(e.target.value)}})}),Object(I.jsx)(Z.a,{label:"Redeem",size:"large",onClick:function(){h(""),n(g)}})]})]})})}function te(e){var t=e.name,n=e.email,a=e.amount,c=e.secret,r=e.removeGiftHandler;return Object(I.jsx)(f.a,{align:"center",children:Object(I.jsxs)(V.a,{fill:!0,align:"center",pad:"large",children:[Object(I.jsx)(W.a,{children:"Let your friend know"}),Object(I.jsxs)(f.a,{align:"center",children:[Object(I.jsx)(M.a,{border:"all",margin:{bottom:"10px"},children:Object(I.jsx)(q.a,{pad:"medium",children:Object(I.jsxs)("pre",{children:["Hey ",t,"!",Object(I.jsx)("br",{}),"I'm sending you ",a," dots as a gift!",Object(I.jsx)("br",{}),"you can go to ",Object(I.jsx)("a",{href:"#",children:"here"})," to claim your gift, and type in the following secret message to claim your DOTs.",Object(I.jsx)("br",{}),Object(I.jsx)("h4",{children:c}),"The website will walk you through to create your own secure Polkadot account",Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),"Enjoy!"]})})}),Object(I.jsxs)(f.a,{direction:"row",fill:!0,justify:"evenly",children:[Object(I.jsx)(Z.a,{label:"Print"}),Object(I.jsx)(Z.a,{label:"Email",as:"a",href:"mailto:".concat(n)}),Object(I.jsx)(Z.a,{label:"Remove",onClick:function(){return r(c)}})]})]})]})})}var ne=n(17);function ae(e){var t=L(),a=t.api,c=t.apiState,r=t.keyring,o=t.keyringState;return"READY"===c&&(window.api=a),"READY"===o&&(window.keyring=r),window.util=n(0),window.utilCrypto=n(17),null}function ce(){var e=L(),t=e.api,n=e.apiState,c=e.keyring,r=(e.keyringState,e.apiError,Object(a.useState)(null)),o=Object(d.a)(r,2),s=o[0],g=o[1],x=Object(a.useState)(!1),h=Object(d.a)(x,2),m=h[0],E=h[1],v=Object(a.useState)(""),y=Object(d.a)(v,2),k=y[0],S=y[1],C=function(){var e=Object(u.a)(l.a.mark((function e(n){var a,c,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.from,c=n.to,r=n.amount,console.log("Sending a gift from ".concat(a.address," to ").concat(c.address," of amount of ").concat(r)),e.next=4,t.tx.gift.gift(r,c.address).signAndSend(a,(function(e){console.log("Current status is ".concat(JSON.stringify(e,null,2))),e.status.isInBlock?console.log("Transaction included at blockHash ".concat(e.status.asInBlock)):e.status.isFinalized&&(console.log("Transaction finalized at blockHash ".concat(e.status.asFinalized)),o())}));case 4:o=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(l.a.mark((function e(n){var a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.giftAccount,c=n.toAccount,console.log("Claiming the gift  ".concat(a.address," to ").concat(c.address)),e.next=4,t.tx.gift.claim(c.address).signAndSend(a,(function(e){console.log("Current status is ".concat(JSON.stringify(e,null,2))),e.status.isInBlock?console.log("Transaction included at blockHash ".concat(e.status.asInBlock)):e.status.isFinalized&&(console.log("Transaction finalized at blockHash ".concat(e.status.asFinalized)),r())}));case 4:r=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(n){var a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.fromAccount,c=n.giftAccount,console.log("Removing the gift  ".concat(c.address," by ").concat(a.address)),e.next=4,t.tx.gift.remove(c.address).signAndSend(a,(function(e){console.log("Current status is ".concat(JSON.stringify(e,null,2))),e.status.isInBlock?console.log("Transaction included at blockHash ".concat(e.status.asInBlock)):e.status.isFinalized&&(console.log("Transaction finalized at blockHash ".concat(e.status.asFinalized)),r())}));case 4:r=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,o,i,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=4;break}console.log("no account is selected"),e.next=19;break;case 4:if("READY"!==n){e.next=18;break}return e.next=7,c.getPair(k);case 7:a=e.sent,r=Object(ne.mnemonicGenerate)(),o=t.name,i=c.addUri(r,null,{name:o},"ed25519"),s=i.pair,u={from:a,to:s,amount:t.amount},C(u),g({secret:r,name:t.name||"",email:t.email||"",amount:t.amount}),E(!0),e.next=19;break;case 18:console.log("api not READY!"+n);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,o,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=4;break}console.log("no account is selected"),e.next=16;break;case 4:if("READY"!==n){e.next=15;break}return a=t,r=c.addUri(a,null,{name:"gift"},"ed25519"),o=r.pair,i=o,e.next=10,c.getPair(k);case 10:s=e.sent,R({giftAccount:i,toAccount:s}),e.next=16;break;case 15:console.log("api not READY!"+n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,o,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=4;break}console.log("no account is selected"),e.next=17;break;case 4:if("READY"!==n){e.next=16;break}return a=t,r=c.addUri(a,null,{name:"gift"},"ed25519"),o=r.pair,i=o,e.next=10,c.getPair(k);case 10:s=e.sent,N({giftAccount:i,fromAccount:s}),E(!1),e.next=17;break;case 16:console.log("api not READY!"+n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsx)(j.a,{theme:b.a,children:Object(I.jsx)(O.a.Extend,{value:{global:{colors:{brand:"#e6007a"}}},children:Object(I.jsxs)(f.a,{children:[Object(I.jsx)(F,{loginHandler:S}),!m&&Object(I.jsx)(ee,{generateGiftHandler:w,claimGiftHandler:_}),m&&Object(I.jsx)(p.a,{onEsc:function(){return E(!1)},onClickOutside:function(){return E(!1)},animate:"false",children:Object(I.jsx)(te,Object(i.a)(Object(i.a)({},s),{},{removeGiftHandler:T}))})]})})}),Object(I.jsx)(ae,{})]})}function re(){return Object(I.jsx)(B,{children:Object(I.jsx)(ce,{})})}o.a.render(Object(I.jsx)(re,{}),document.getElementById("root"))}},[[738,1,2]]]);
//# sourceMappingURL=main.859da332.chunk.js.map
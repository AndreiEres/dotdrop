(this["webpackJsonpsubstrate-front-end-template"]=this["webpackJsonpsubstrate-front-end-template"]||[]).push([[0],{495:function(e){e.exports=JSON.parse('{"APP_NAME":"substrate-front-end-tutorial","DEVELOPMENT_KEYRING":true,"RPC":{}}')},548:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://dev-node.substrate.dev"}')},549:function(e){e.exports=JSON.parse('{"GiftInfo":{"gifter":"AccountId","deposit":"Balance","amount":"Balance"}}')},558:function(e,t){},579:function(e,t){},580:function(e,t){},598:function(e,t){},599:function(e,t){},602:function(e,t){},604:function(e,t){},614:function(e,t){},616:function(e,t){},642:function(e,t){},644:function(e,t){},649:function(e,t){},651:function(e,t){},658:function(e,t){},659:function(e,t){},661:function(e,t){},673:function(e,t){},676:function(e,t){},688:function(e,t){},689:function(e,t){},691:function(e,t){},698:function(e,t){},756:function(e,t){},764:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(183),o=n.n(r),i=n(35),s=n(15),u=n.n(s),l=n(28),d=n(3),j=n(840),b=n(827),f=n(826),O=n(205),p=n(833),h=n(820),g=n(835),x=n(836),m=n(821),v=n(829),y=n(359),E=n(494),k=n.n(E),w=n(381),S=n(386),C=n(321),R=n.n(C),N=n(495),_=n(548),T=n(549),A=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/dotdrop",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/dotdrop",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),P=Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},N),_),A),{},{types:T}),I=n(19),D=k.a.parse(window.location.search).rpc||P.PROVIDER_SOCKET;console.log("Connected socket: ".concat(D));var H={socket:D,jsonrpc:Object(i.a)(Object(i.a)({},y.default),P.RPC),types:P.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},Y=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(i.a)(Object(i.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(i.a)(Object(i.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(i.a)(Object(i.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(i.a)(Object(i.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(i.a)(Object(i.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(i.a)(Object(i.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},G=!1,K=c.a.createContext(),F=function(e){var t=Object(i.a)({},H);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(a.useReducer)(Y,t),c=Object(d.a)(n,2),r=c[0],o=c[1];return function(e,t){var n=e.apiState,a=e.socket,c=e.jsonrpc,r=e.types;if(!n){t({type:"CONNECT_INIT"});var o=new w.WsProvider(a),i=new w.ApiPromise({provider:o,types:r,rpc:c});i.on("connected",(function(){t({type:"CONNECT",payload:i}),i.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),i.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),i.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(r,o),function(e,t){var n=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(S.web3Enable)(P.APP_NAME);case 4:return e.next=6,Object(S.web3Accounts)();case 6:n=(n=e.sent).map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(i.a)(Object(i.a)({},n),{},{name:"".concat(n.name," (").concat(n.source,")")})}})),R.a.loadAll({isDevelopment:P.DEVELOPMENT_KEYRING},n),t({type:"SET_KEYRING",payload:R.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(G)return t({type:"SET_KEYRING",payload:R.a});G=!0,n()}}(r,o),Object(I.jsx)(K.Provider,{value:r,children:e.children})},B=function(){return Object(i.a)({},Object(a.useContext)(K))};function L(e){var t=e.setAccountAddress,n=B().keyring,c=Object(a.useState)(""),r=Object(d.a)(c,2),o=r[0],i=r[1],s=n.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}})),u=s.length>0?s[0].value:"";Object(a.useEffect)((function(){t&&t(u),i(u)}),[t,u]);return Object(I.jsx)(O.a,{children:Object(I.jsx)(v.a,{options:s,value:o,valueKey:{key:"value",reduce:!0},labelKey:"text",children:function(e,t,n,a){return Object(I.jsx)(O.a,{children:e.text})},onChange:function(e){var n,a=e.value;return n=a,t&&t(n),void i(n)},size:"small"})})}function U(e){var t=B(),n=t.api,a=t.keyring;return(null===a||void 0===a?void 0:a.getPairs)&&(null===n||void 0===n?void 0:n.query)?Object(I.jsx)(L,Object(i.a)({},e)):null}function z(e){var t=e.loginHandler;return Object(I.jsxs)(h.a,{height:"6rem",children:[Object(I.jsx)(O.a,{height:"100%",children:Object(I.jsx)(g.a,{height:"100%",src:"".concat("/dotdrop","/assets/Polkadot_symbol_color.png")})}),Object(I.jsxs)(O.a,{direction:"row",gap:"small",children:[Object(I.jsx)(x.a,{background:"brand",children:Object(I.jsx)(m.a,{})}),Object(I.jsx)(U,{setAccountAddress:t})]})]})}var W=n(822),J=n(823),V=n(837),M=n(824),q=n(825),Q=n(834),X=n(831),Z=n(830),$=n(838);function ee(e){var t=e.generateGiftHandler,n=e.claimGiftHandler,r=Object(a.useState)(""),o=Object(d.a)(r,2),i=o[0],s=o[1],u=Object(a.useState)(""),l=Object(d.a)(u,2),j=l[0],b=l[1],f=Object(a.useState)(""),p=Object(d.a)(f,2),h=p[0],x=p[1],m=c.a.useContext(W.a);return Object(I.jsx)(O.a,{align:"center",children:Object(I.jsxs)(J.a,{align:"center",height:"100%",children:[Object(I.jsx)(V.a,{level:"1",children:"Dots are Awesome!"}),Object(I.jsxs)(O.a,{align:"center",children:[Object(I.jsx)(V.a,{level:"3",textAlign:"center",children:"Send some DOTs to your friends and family and have them join polkadot network!"}),Object(I.jsx)(M.a,{background:"light-1",children:Object(I.jsxs)(q.a,{pad:"medium",direction:"row",gap:"medium",children:["small"!=m?Object(I.jsx)(M.a,{height:"small",width:"medium",justify:"center",children:Object(I.jsx)(g.a,{src:"".concat("/dotdrop","/assets/Polkadot_Logotype_color.png"),width:"100%"})}):null,Object(I.jsxs)(O.a,{width:"small"==m?"100%":"60%",children:[Object(I.jsxs)(O.a,{children:[Object(I.jsx)(Q.a,{children:"Gift value:"}),Object(I.jsx)(X.a,{placeholder:"10",value:i,onChange:function(e){!function(e){s(e)}(e.target.value)}})]}),Object(I.jsxs)(O.a,{children:[Object(I.jsx)(Q.a,{children:"To who:"}),Object(I.jsx)(X.a,{placeholder:"Bob",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(I.jsx)(Z.a,{primary:!0,label:"Generate",margin:{top:"xsmall"},alignSelf:"end",onClick:function(){t({amount:i,name:j,email:""})}})]})]})})]}),Object(I.jsxs)(O.a,{children:[Object(I.jsx)(V.a,{level:"3",textAlign:"center",children:"Enter the 12 words secret below to claim the gifts!"}),Object(I.jsx)(O.a,{margin:{bottom:"10px"},children:Object(I.jsx)($.a,{fill:!0,value:h,onChange:function(e){return x(e.target.value)}})}),Object(I.jsx)(Z.a,{label:"Redeem",size:"large",onClick:function(){x(""),n(h)}})]})]})})}var te=n(839);function ne(e){var t=e.name,n=e.email,a=e.amount,c=e.secret,r=e.removeGiftHandler,o=e.closeHandler;return Object(I.jsxs)(O.a,{pad:"medium",align:"center",children:[Object(I.jsx)(V.a,{children:"Let your friend know!"}),Object(I.jsxs)(O.a,{align:"center",children:[Object(I.jsx)(M.a,{border:"all",margin:{bottom:"10px"},children:Object(I.jsx)(q.a,{pad:"medium",overflow:"scroll",children:Object(I.jsxs)("p",{children:["Hey ",t,"!",Object(I.jsx)("br",{}),"I'm sending you ",a," dots as a gift!",Object(I.jsx)("br",{}),"you can go ",Object(I.jsx)(te.a,{onClick:function(){return o()},label:"here"})," ","and type in the following secret message to claim your DOTs.",Object(I.jsx)("br",{}),Object(I.jsx)("h4",{children:c}),"The website will walk you through to create your own secure Polkadot account",Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),"Enjoy!"]})})}),Object(I.jsxs)(O.a,{direction:"row",fill:!0,justify:"evenly",children:[Object(I.jsx)(Z.a,{label:"Print"}),Object(I.jsx)(Z.a,{label:"Email",as:"a",href:"mailto:".concat(n)}),Object(I.jsx)(Z.a,{label:"Remove",onClick:function(){return r(c)}})]})]})]})}var ae=n(16);function ce(e){var t=B(),a=t.api,c=t.apiState,r=t.keyring,o=t.keyringState;return"READY"===c&&(window.api=a),"READY"===o&&(window.keyring=r),window.util=n(0),window.utilCrypto=n(16),null}var re=n(390),oe=n.n(re),ie=n(828),se=new oe.a("1000000000000",10);function ue(){var e=B(),t=e.api,n=e.apiState,c=e.keyring,r=(e.keyringState,e.apiError,Object(a.useState)(null)),o=Object(d.a)(r,2),s=o[0],h=o[1],g=Object(a.useState)(!1),x=Object(d.a)(g,2),m=x[0],v=x[1],y=Object(a.useState)(""),E=Object(d.a)(y,2),k=E[0],w=E[1],S=function(){var e=Object(l.a)(u.a.mark((function e(n){var a,c,r,o,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.from,c=n.to,r=n.amount,console.log("Sending a gift from ".concat(a.address," to ").concat(c.address," of amount of ").concat(r)),o=new oe.a(r,10),i=o.mul(se),e.next=6,t.tx.gift.gift(i.toString(),c.address).signAndSend(a,(function(e){console.log("Current status is ".concat(JSON.stringify(e,null,2))),e.status.isInBlock?console.log("Transaction included at blockHash ".concat(e.status.asInBlock)):e.status.isFinalized&&(console.log("Transaction finalized at blockHash ".concat(e.status.asFinalized)),s())}));case 6:s=e.sent;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(u.a.mark((function e(n){var a,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.giftAccount,c=n.toAccount,console.log("Claiming the gift  ".concat(a.address," to ").concat(c.address)),e.next=4,t.tx.gift.claim(c.address).signAndSend(a,(function(e){console.log("Current status is ".concat(JSON.stringify(e,null,2))),e.status.isInBlock?console.log("Transaction included at blockHash ".concat(e.status.asInBlock)):e.status.isFinalized&&(console.log("Transaction finalized at blockHash ".concat(e.status.asFinalized)),r())}));case 4:r=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(u.a.mark((function e(n){var a,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.fromAccount,c=n.giftAccount,console.log("Removing the gift  ".concat(c.address," by ").concat(a.address)),e.next=4,t.tx.gift.remove(c.address).signAndSend(a,(function(e){console.log("Current status is ".concat(JSON.stringify(e,null,2))),e.status.isInBlock?console.log("Transaction included at blockHash ".concat(e.status.asInBlock)):e.status.isFinalized&&(console.log("Transaction finalized at blockHash ".concat(e.status.asFinalized)),r())}));case 4:r=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,o,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("READY"===n){e.next=5;break}console.log("api not READY!"+n),window.alert("We were not able to connect to the blockchain!\nPlease Check if you have set the correct rpc address for the chain and in case you are using any adblockers make sure it is turned off!"),e.next=20;break;case 5:if(k){e.next=10;break}console.log("no account is selected"),window.alert("You need to sign in with your account to be able to send a gift \ud83d\udd11\ud83d\udd13"),e.next=20;break;case 10:return e.next=12,c.getPair(k);case 12:a=e.sent,r=Object(ae.mnemonicGenerate)(),o=t.name,i=c.createFromUri(r,{name:o},"ed25519"),s={from:a,to:i,amount:t.amount},S(s),h({secret:r,name:t.name||"",email:t.email||"",amount:t.amount}),v(!0);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("READY"===n){e.next=5;break}console.log("api not READY!"+n),window.alert("We were not able to connect to the blockchain!\nPlease Check if you have set the correct rpc address for the chain and in case you are using any adblockers make sure it is turned off!"),e.next=17;break;case 5:if(k){e.next=10;break}console.log("no account is selected"),window.alert("You need to sign in with your account to be able to send a gift \ud83d\udd11\ud83d\udd13"),e.next=17;break;case 10:return a=t,r=c.createFromUri(a,{name:"interim_gift"},"ed25519"),e.next=14,c.getPair(k);case 14:o=e.sent,C({giftAccount:r,toAccount:o});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("READY"===n){e.next=5;break}console.log("api not READY!"+n),window.alert("We were not able to connect to the blockchain!\nPlease Check if you have set the correct rpc address for the chain and in case you are using any adblockers make sure it is turned off!"),e.next=18;break;case 5:if(k){e.next=10;break}console.log("no account is selected"),window.alert("You need to sign in with your account to be able to send a gift \ud83d\udd11\ud83d\udd13"),e.next=18;break;case 10:return a=t,r=c.createFromUri(a,{name:"interim_gift"},"ed25519"),e.next=14,c.getPair(k);case 14:o=e.sent,R({giftAccount:r,fromAccount:o}),v(!1);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[Object(I.jsx)(j.a,{theme:b.a,children:Object(I.jsx)(f.a.Extend,{value:{global:{colors:{brand:"#e6007a"}}},children:Object(I.jsxs)(O.a,{children:[Object(I.jsx)(z,{loginHandler:w}),!m&&Object(I.jsx)(ee,{generateGiftHandler:N,claimGiftHandler:_}),m&&Object(I.jsxs)(p.a,{onEsc:function(){return v(!1)},onClickOutside:function(){return v(!1)},animate:"false",children:[Object(I.jsx)(O.a,{height:"3rem",direction:"row",justify:"end",pad:"small",children:Object(I.jsx)(ie.a,{onClick:function(){return v(!1)}})}),Object(I.jsx)(ne,Object(i.a)(Object(i.a)({},s),{},{removeGiftHandler:T,closeHandler:function(){return v(!1)}}))]})]})})}),Object(I.jsx)(ce,{})]})}function le(){return Object(I.jsx)(F,{children:Object(I.jsx)(ue,{})})}o.a.render(Object(I.jsx)(le,{}),document.getElementById("root"))}},[[764,1,2]]]);
//# sourceMappingURL=main.138049f7.chunk.js.map
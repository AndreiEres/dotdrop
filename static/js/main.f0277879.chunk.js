(this["webpackJsonpsubstrate-front-end-template"]=this["webpackJsonpsubstrate-front-end-template"]||[]).push([[0],{515:function(e){e.exports=JSON.parse('{"APP_NAME":"dotdrop","DEVELOPMENT_KEYRING":true,"RPC":{}}')},566:function(e,t,n){},577:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://dev-node.substrate.dev"}')},578:function(e){e.exports=JSON.parse('{"GiftInfo":{"gifter":"AccountId","deposit":"Balance","amount":"Balance"}}')},587:function(e,t){},608:function(e,t){},609:function(e,t){},627:function(e,t){},628:function(e,t){},631:function(e,t){},633:function(e,t){},643:function(e,t){},645:function(e,t){},671:function(e,t){},673:function(e,t){},678:function(e,t){},680:function(e,t){},686:function(e,t){},688:function(e,t){},700:function(e,t){},703:function(e,t){},715:function(e,t){},716:function(e,t){},718:function(e,t){},725:function(e,t){},790:function(e,t){},792:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(120),s=n.n(r),i=(n(566),n(856)),o=n(2),l=n(14),j=n.n(l),u=n(26),d=n(41),b=n(385),O=n(514),h=n.n(O),x=n(405),f=n(163),m=n(347),p=n.n(m),g=n(515),y=n(577),v=n(578),N=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/dotdrop",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/dotdrop",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),w=Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},g),y),N),{},{types:v}),C=n(4),k=h.a.parse(window.location.search).rpc||w.PROVIDER_SOCKET;console.log("Connected socket: ".concat(k));var S={socket:k,jsonrpc:Object(d.a)(Object(d.a)({},b.default),w.RPC),types:w.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},E=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(d.a)(Object(d.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(d.a)(Object(d.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(d.a)(Object(d.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(d.a)(Object(d.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(d.a)(Object(d.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(d.a)(Object(d.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},A=!1,R=a.a.createContext(),T=function(e){var t=Object(d.a)({},S);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(c.useReducer)(E,t),a=Object(o.a)(n,2),r=a[0],s=a[1];return function(e,t){try{var n=e.apiState,c=e.socket,a=e.jsonrpc,r=e.types;if(n)return;t({type:"CONNECT_INIT"});var s=new x.WsProvider(c),i=new x.ApiPromise({provider:s,types:r,rpc:a});i.on("connected",(function(){t({type:"CONNECT",payload:i}),i.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),i.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),i.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}catch(o){console.error(o),t({type:"CONNECT_ERROR",payload:err})}}(r,s),function(e,t){var n=function(){var e=Object(u.a)(j.a.mark((function e(){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(f.web3Enable)(w.APP_NAME);case 4:return n=e.sent,console.log(n),window.polkadapp=f,e.next=9,Object(f.web3Accounts)();case 9:(c=e.sent).forEach((function(e){return console.log(e)})),c=c.map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(d.a)(Object(d.a)({},n),{},{name:"".concat(n.name," (").concat(n.source,")")})}})),p.a.loadAll({isDevelopment:w.DEVELOPMENT_KEYRING},c),t({type:"SET_KEYRING",payload:p.a}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(A)return t({type:"SET_KEYRING",payload:p.a});A=!0,n()}}(r,s),Object(C.jsx)(R.Provider,{value:r,children:e.children})},_=function(){return Object(d.a)({},Object(c.useContext)(R))},H=n(155),P=n.n(H),I=function(e,t){var n=new P.a("10",10),c=new P.a(e,10),a=n.pow(c);return new P.a(t,10).mul(a).toString()},D=function(){var e=Object(u.a)(j.a.mark((function e(t,n,c){var a,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.pairOrAddress,r=n.signer,e.next=3,t.signAsync(a,{signer:r});case 3:return e.next=5,t.send((function(e){console.log("Current status is ".concat(JSON.stringify(e,null,2))),e.status.isInBlock?(console.log("Transaction included at blockHash ".concat(e.status.asInBlock)),c&&c({result:e})):e.status.isFinalized&&(console.log("Transaction finalized at blockHash ".concat(e.status.asFinalized)),s())}));case 5:s=e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),G={createGift:function(){var e=Object(u.a)(j.a.mark((function e(t,n,c,a){var r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Sending a gift from ".concat(n," to ").concat(c.to," of amount of ").concat(c.amount)),e.prev=1,r=I(t.registry.chainDecimals,c.amount),s=t.tx.gift.gift(r,c.to.address),e.next=6,D(s,n,a);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),a&&a({error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,c,a){return e.apply(this,arguments)}}(),claimGift:function(){var e=Object(u.a)(j.a.mark((function e(t,n,c,a){var r,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Claiming the gift  ".concat(null===n||void 0===n||null===(r=n.pairOrAddress)||void 0===r?void 0:r.address," to ").concat(null===c||void 0===c||null===(s=c.by)||void 0===s?void 0:s.address)),e.prev=1,i=t.tx.gift.claim(c.by.address),e.next=5,D(i,n,a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a&&a({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,c,a){return e.apply(this,arguments)}}(),removeGift:function(){var e=Object(u.a)(j.a.mark((function e(t,n,c,a){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Removing the gift  ".concat(c.to," by ").concat(n)),e.prev=1,r=t.tx.gift.remove(c.to.address),e.next=5,D(r,n,a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a&&a({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,c,a){return e.apply(this,arguments)}}()};function U(e){var t=_(),c=t.api,a=t.apiState,r=t.keyring,s=t.keyringState;return"READY"===a&&(window.api=c),"READY"===s&&(window.keyring=r),window.util=n(0),window.utilCrypto=n(17),null}var F=n(6),B=n(10),W=n(17),Y=function(){function e(t,n){Object(F.a)(this,e),this.registry=t,this.setState=n}return Object(B.a)(e,[{key:"signPayload",value:function(){var e=Object(u.a)(j.a.mark((function e(t){var n=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){var a=t.method.length>5e3,r=n.registry.createType("ExtrinsicPayload",t,{version:t.version}),s=a?Object(W.blake2AsU8a)(r.toU8a(!0)):r.toU8a();n.setState({isQrHashed:a,qrAddress:t.address,qrPayload:s,qrReject:c,qrResolve:e})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),L=n(858),K=n(850);function q(e){var t=e.show,n=e.message;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(L.a,{show:t,centered:!0,children:Object(C.jsx)(L.a.Body,{children:Object(C.jsxs)("div",{style:{height:"100px"},className:"d-flex flex-column justify-content-around align-items-center",children:[Object(C.jsx)("div",{children:n}),Object(C.jsx)("div",{children:Object(C.jsx)(K.a,{animation:"border",role:"status",children:Object(C.jsx)("span",{className:"sr-only",children:"Processing..."})})})]})})})})}var M=n(104),V=n(48),Q=n(851),J=n(529),z=n(861),X=n(528);function Z(e){var t=e.children,n=e.onClick;return Object(C.jsx)(X.a,{style:{minWidth:"100px"},variant:"outline-dark",className:"shadow-sm",onClick:n,children:t})}function $(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-4",children:Object(C.jsx)(M.b,{to:"/",children:Object(C.jsx)(Z,{children:"Home"})})}),Object(C.jsx)(Q.a,{className:"justify-content-center align-items-center",children:Object(C.jsx)(J.a,{className:"d-flex justify-content-center align-items-center",children:Object(C.jsx)(z.a,{style:{width:800,maxWidth:"100%"},className:"shadow",children:Object(C.jsx)(z.a.Body,{children:Object(C.jsx)(Q.a,{className:"justify-content-center align-items-center",children:Object(C.jsxs)(J.a,{md:"8",style:{height:400},className:"d-flex flex-column justify-content-center align-items-center",children:[Object(C.jsx)("h1",{children:"Congradulations!!"}),Object(C.jsx)("h3",{children:" \ud83c\udf89\ud83e\udd73\ud83c\udf8a \ud83c\udf81"}),Object(C.jsx)("p",{children:"Your gift has been claimed and tranferred to your account!"}),Object(C.jsx)("p",{})]})})})})})})]})}function ee(e){var t=e.claimGiftHandler,n=Object(c.useContext)(he).prevStep,a=Object(c.useState)(""),r=Object(o.a)(a,2),s=r[0],i=r[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-4",children:Object(C.jsx)(J.a,{children:Object(C.jsx)(Z,{onClick:function(){return n()},children:"< Back"})})}),Object(C.jsx)(Q.a,{className:"justify-content-center align-items-center",children:Object(C.jsx)(J.a,{className:"d-flex justify-content-center align-items-center",children:Object(C.jsx)(z.a,{style:{width:800,maxWidth:"100%"},className:"shadow",children:Object(C.jsxs)(z.a.Body,{children:[Object(C.jsx)(Q.a,{className:"p-3 text-center",children:Object(C.jsx)(J.a,{children:Object(C.jsx)("h3",{children:"Enter the 12 words secret you have recieved to redeem your gift!"})})}),Object(C.jsxs)(Q.a,{className:"justify-content-center align-items-center",children:[Object(C.jsx)(J.a,{style:{height:200},className:"d-flex flex-column justify-content-center align-items-center text-center",children:Object(C.jsx)("textarea",{className:"w-50 h-75",onChange:function(e){return i(e.target.value)},value:s})}),Object(C.jsx)("div",{className:"w-100"}),Object(C.jsx)(J.a,{className:"d-flex justify-content-end",children:Object(C.jsx)(Z,{onClick:function(){s&&t(s)},children:"Redeem"})})]})]})})})})]})}var te=n(859);function ne(e){var t=e.setAccountHandler,n=_().keyring,a=Object(c.useState)(function(){var e=Object(W.mnemonicGenerate)();return{mnemonic:e,account:n.createFromUri(e,null,"sr25519")}}()),r=Object(o.a)(a,2),s=r[0],i=(r[1],function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(s.account);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),l=(null===s||void 0===s?void 0:s.mnemonic)?s.mnemonic.split(" ").map((function(e){return e.trim()})):[];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"pt-3 px-3",children:Object(C.jsxs)(J.a,{children:[Object(C.jsx)("h3",{className:"text-center",children:"Your account is Ready!"}),Object(C.jsx)("p",{children:"Before we deposit your gift to your new account let\u2019s store your accont in a secure place be able to access your DOTs in future!"})]})}),Object(C.jsxs)(Q.a,{className:"p-3 justify-content-center align-items-center",children:[Object(C.jsx)(Q.a,{className:"p-5",children:l.map((function(e,t){return Object(C.jsx)(J.a,{md:4,children:Object(C.jsx)("div",{className:"border-bottom border-dark",children:"".concat(e)})})}))}),Object(C.jsx)("div",{className:"w-100"}),Object(C.jsx)(J.a,{children:Object(C.jsx)(te.a.Check,{type:"checkbox",label:"I have stored my 12 words secret in a safe place."})}),Object(C.jsx)("div",{className:"w-100"}),Object(C.jsx)(J.a,{className:"mt-3 d-flex justify-content-end",children:Object(C.jsx)(Z,{onClick:function(){return i()},children:"Next"})})]})]})}var ce=n(857),ae=n(852);function re(e){var t,n=e.accounts,c=e.selectedAccount,a=e.setSelectedAccount;return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(ce.a,{className:"w-100",as:ae.a,onSelect:function(e,t){a(n[e])},children:[Object(C.jsx)(ce.a.Toggle,{variant:"outline-dark",id:"dropdown-item-button",className:"w-100",size:"lg",children:c?(null===c||void 0===c||null===(t=c.meta)||void 0===t?void 0:t.name)||c.address:"Select an account"}),Object(C.jsx)(ce.a.Menu,{children:n.map((function(e,t){var n;return Object(C.jsx)(ce.a.Item,{eventKey:t,active:e.address===(null===c||void 0===c?void 0:c.address),children:(null===e||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.name)||e.address})}))})]})})}function se(e){var t=e.setAccountHandler,n=Object(c.useState)(null),a=Object(o.a)(n,2),r=a[0],s=a[1],i=_().keyring.getPairs();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-3 text-center",children:Object(C.jsx)(J.a,{children:Object(C.jsx)("h3",{children:"Select the account you want to use"})})}),Object(C.jsxs)(Q.a,{className:"p-5 justify-content-center",children:[Object(C.jsx)(J.a,{style:{height:200},className:"d-flex flex-column justify-content-center align-items-center text-center",children:Object(C.jsx)(re,{accounts:i,selectedAccount:r,setSelectedAccount:s})}),Object(C.jsx)("div",{className:"w-100"}),Object(C.jsx)(J.a,{className:"d-flex justify-content-end",children:Object(C.jsx)(Z,{onClick:function(){t(r)},children:"Add"})})]})]})}function ie(){return Object(C.jsx)("div",{children:"Hardware Wallet Account"})}var oe=n(853);function le(e){var t,n=e.setAccountHandler,a=_().keyring,r=Object(c.useState)("true"),s=Object(o.a)(r,2),i=s[0],l=s[1],j=Object(c.useState)(null),u=Object(o.a)(j,2),d=u[0],b=u[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-3 text-center",children:Object(C.jsx)(J.a,{children:Object(C.jsx)("h3",{children:"Scan your account QRCode from your signer app"})})}),i?Object(C.jsx)(Q.a,{className:"justify-content-center align-items-center",children:Object(C.jsx)(J.a,{md:"6",style:{height:400},children:Object(C.jsx)(oe.a,{onScan:function(e){return function(e){if(e.isAddress){var t=a.keyring.addFromAddress(e.content,{genesisHash:e.genesisHash,name:e.name,isExternal:!0},null);b(t),l(!1)}}(e)}})})}):Object(C.jsxs)(Q.a,{className:"justify-content-center align-items-center",children:[Object(C.jsxs)(J.a,{style:{height:400},className:"d-flex flex-column justify-content-center align-items-center text-center",children:[Object(C.jsxs)("h4",{children:[null===d||void 0===d||null===(t=d.meta)||void 0===t?void 0:t.name," "]}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{children:null===d||void 0===d?void 0:d.address})]}),Object(C.jsx)("div",{className:"w-100"}),Object(C.jsxs)(J.a,{md:"6",className:"d-flex justify-content-between",children:[Object(C.jsx)(Z,{onClick:function(){return b(null),void l(!0)},children:"Cancel"}),Object(C.jsx)(Z,{onClick:function(){n(d)},children:"Add"})]})]})]})}function je(e){var t=e.show,n=e.message,c=e.handleClose;return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(L.a,{show:t,onHide:c,children:[Object(C.jsx)(L.a.Header,{closeButton:!0,children:Object(C.jsx)(L.a.Title,{children:"Something went wrong"})}),Object(C.jsx)(L.a.Body,{children:Object(C.jsx)("div",{style:{height:"100px"},className:"d-flex flex-column justify-content-around align-items-center",children:Object(C.jsx)("div",{children:n})})})]})})}function ue(e){var t=e.children,n=Object(c.useContext)(he).jumpToStep;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-4",children:Object(C.jsx)(J.a,{children:Object(C.jsx)(Z,{onClick:function(){return n(0)},children:"< Back"})})}),Object(C.jsx)(Q.a,{className:"justify-content-center align-items-center",children:Object(C.jsx)(J.a,{className:"d-flex justify-content-center align-items-center",children:Object(C.jsx)(z.a,{style:{width:800,maxWidth:"100%"},className:"shadow",children:Object(C.jsx)(z.a.Body,{children:t})})})})]})}function de(e){e.image;var t=e.children,n=e.onClick;return Object(C.jsx)(z.a,{style:{width:"200px",height:"200px"},className:"my-2 shadow",onClick:n,children:Object(C.jsx)(z.a.Body,{className:"d-flex flex-column justify-content-center align-items-center text-center",children:t})})}function be(e){var t=e.options;return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(Q.a,{xs:1,md:2,className:"mt-5 mx-auto justify-content-center align-items-center",children:t.map((function(e){return Object(C.jsx)(J.a,{className:"d-flex justify-content-center align-items-center",children:Object(C.jsx)(de,{onClick:function(){e.selectHandler()},children:Object(C.jsx)("h4",{children:e.label})})})}))})})}function Oe(){var e=Object(c.useContext)(he),t=e.nextStep,n=e.setAccountSource,a=function(e){n(e),t()},r=[{selectHandler:function(){return a("NEW_ACCOUNT")},label:"Create new Account"},{selectHandler:function(){return a("EXTENSION_ACCOUNT")},label:"Polkadot extension"},{selectHandler:function(){return a("HARDWALLET_ACCOUNT")},label:"Hardware Wallet"},{selectHandler:function(){return a("SIGNER_ACCOUNT")},label:"Parity Signer"}];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-4",children:Object(C.jsx)(J.a,{children:Object(C.jsx)(M.b,{to:"/",children:Object(C.jsx)(Z,{children:"< Back"})})})}),Object(C.jsx)(Q.a,{className:"py-3",children:Object(C.jsx)(J.a,{className:"text-center",children:Object(C.jsx)("h1",{children:"Let\u2019s deposit your gift to your Polkadot Account"})})}),Object(C.jsx)(Q.a,{children:Object(C.jsx)(be,{options:r})})]})}var he=Object(c.createContext)();function xe(){var e,t=_(),n=t.keyring,a=t.apiState,r=t.api,s=G.claimGift,i=Object(c.useState)(0),l=Object(o.a)(i,2),d=l[0],b=l[1],O=Object(c.useState)(null),h=Object(o.a)(O,2),x=h[0],f=h[1],m=Object(c.useState)(null),p=Object(o.a)(m,2),g=p[0],y=p[1],v=Object(c.useState)(!1),N=Object(o.a)(v,2),w=N[0],k=N[1],S=Object(c.useState)(null),E=Object(o.a)(S,2),A=E[0],R=E[1],T=Object(c.useState)(""),H=Object(o.a)(T,2),P=H[0],I=H[1],D=function(){k(!1),R(null)},U=function(e){D(),b(e)},F=function(){U(d+1)},B=function(e){k(!1),I(null),R(e.message)},W=function(e){var t=e.error;e.result;t?B(t):F()},Y=function(){var e=Object(u.a)(j.a.mark((function e(t){var c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"READY"!==a?(console.log("api not READY!"+a),window.alert("We were not able to connect to the blockchain!\nPlease Check if you have set the correct rpc address for the chain and in case you are using any adblockers make sure it is turned off!")):x?(c=t,i=n.createFromUri(c,{name:"interim_gift"},"sr25519"),s(r,{pairOrAddress:i},{by:x},W),I("Transferring your gift to your account..."),k(!0)):(console.log("no account is selected"),window.alert("You need to sign in with your account to be able to send a gift \ud83d\udd11\ud83d\udd13"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L={NEW_ACCOUNT:ne,EXTENSION_ACCOUNT:se,HARDWALLET_ACCOUNT:ie,SIGNER_ACCOUNT:le};switch(d){case 1:e=Object(C.jsx)(ue,{children:Object(c.createElement)(L[g],{setAccountHandler:function(e){e?(f(e),F()):B(new Error("No account was selected, please login with your account!"))}})});break;case 2:e=Object(C.jsx)(ee,{claimGiftHandler:Y});break;case 3:e=Object(C.jsx)($,{});break;default:e=Object(C.jsx)(Oe,{})}return Object(C.jsxs)(he.Provider,{value:{nextStep:F,prevStep:function(){U(d-1)},jumpToStep:function(e){U(e)},setAccountSource:y},children:[e,Object(C.jsx)(je,{show:!!A,message:A,handleClose:function(){return D()}}),Object(C.jsx)(q,{show:!A&&w,message:P})]})}function fe(e){var t,n,a=e.account,r=e.generateGiftHandler,s=Object(c.useContext)(ke).jumpToStep,i=Object(c.useState)(""),l=Object(o.a)(i,2),j=l[0],u=l[1],d=Object(c.useState)(""),b=Object(o.a)(d,2),O=b[0],h=b[1],x=Object(c.useState)(""),f=Object(o.a)(x,2),m=f[0],p=f[1],g=Object(c.useState)(""),y=Object(o.a)(g,2),v=y[0],N=y[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Q.a,{className:"p-4 justify-content-between",children:[Object(C.jsx)(J.a,{children:Object(C.jsx)(Z,{onClick:function(){return s(0)},children:"< Back"})}),Object(C.jsx)(J.a,{className:"text-right",children:a?(null===a||void 0===a||null===(t=a.meta)||void 0===t?void 0:t.name)?null===a||void 0===a||null===(n=a.meta)||void 0===n?void 0:n.name.toUpperCase():a.address:"No account"})]}),Object(C.jsx)(Q.a,{className:"justify-content-center align-items-center",children:Object(C.jsx)(J.a,{className:"d-flex justify-content-center align-items-center",children:Object(C.jsx)(z.a,{style:{width:600,maxWidth:"100%"},className:"shadow",children:Object(C.jsxs)(z.a.Body,{children:[Object(C.jsx)(Q.a,{className:"p-3 text-center",children:Object(C.jsx)(J.a,{children:Object(C.jsx)("h3",{children:"Generate a gift"})})}),Object(C.jsxs)(Q.a,{className:"justify-content-center align-items-center",children:[Object(C.jsx)(J.a,{style:{height:200},className:"d-flex flex-column justify-content-center align-items-center",children:Object(C.jsxs)(te.a,{children:[Object(C.jsxs)(te.a.Group,{as:Q.a,controlId:"formGroupEmail",children:[Object(C.jsx)(te.a.Label,{children:"Gift value"}),Object(C.jsx)(te.a.Control,{type:"number",placeholder:"10",value:j,onChange:function(e){h(""),u(e.target.value)}})]}),O&&Object(C.jsx)(te.a.Label,{style:{color:"red"},children:Object(C.jsxs)("em",{children:["!",O]})}),Object(C.jsxs)(te.a.Group,{as:Q.a,controlId:"formGroupEmail",children:[Object(C.jsx)(te.a.Label,{children:"To who"}),Object(C.jsx)(te.a.Control,{type:"text",placeholder:"Bob",value:m,onChange:function(e){N(""),p(e.target.value)}})]}),v&&Object(C.jsx)(te.a.Label,{style:{color:"red"},children:Object(C.jsxs)("em",{children:["!",v]})})]})}),Object(C.jsx)("div",{className:"w-100"}),Object(C.jsx)(J.a,{className:"d-flex justify-content-end",children:Object(C.jsx)(Z,{onClick:function(){return function(){var e=!1;return m||(e=!0,N("Please enter a valid name")),j||(e=!0,h("Please enter the gift value")),!e}()&&r({amount:j,name:m})},children:"Generate"})})]})]})})})})]})}function me(e){var t=e.gift,n=e.removeGiftHandler,c=t.name,a=t.amount,r=t.secret;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-4",children:Object(C.jsx)(M.b,{to:"/",children:Object(C.jsx)(Z,{children:"Home"})})}),Object(C.jsx)(Q.a,{className:"justify-content-center align-items-center",children:Object(C.jsx)(J.a,{className:"d-flex justify-content-center align-items-center",children:Object(C.jsx)(z.a,{style:{width:800,maxWidth:"100%"},className:"shadow",children:Object(C.jsxs)(z.a.Body,{children:[Object(C.jsx)(Q.a,{className:"p-3 text-center",children:Object(C.jsx)(J.a,{children:Object(C.jsx)("h3",{children:"Let your firend know!"})})}),Object(C.jsxs)(Q.a,{className:"justify-content-center align-items-center",children:[Object(C.jsx)(J.a,{className:"m-5 d-flex flex-column align-items-center",children:Object(C.jsx)(z.a,{className:"w-75",children:Object(C.jsxs)(z.a.Body,{children:[Object(C.jsxs)("p",{children:["Hey ",c,"! ",Object(C.jsx)("br",{}),"I'm sending you ",a," dots as a gift! you can go here and type in the following secret message to claim your DOTs."]}),Object(C.jsx)("p",{style:{textAlign:"center"},children:Object(C.jsxs)("strong",{children:[r," "]})}),Object(C.jsxs)("p",{children:["The website will walk you through to create your own secure Polkadot account. ",Object(C.jsx)("br",{}),"Enjoy!"]})]})})}),Object(C.jsx)("div",{className:"w-100"}),Object(C.jsxs)(J.a,{className:"px-5 d-flex justify-content-around",children:[Object(C.jsx)(Z,{children:"Print"}),Object(C.jsx)(Z,{children:"Email"}),Object(C.jsx)(Z,{onClick:function(){return n(r)},children:"Remove"})]})]})]})})})})]})}function pe(e){var t=e.setAccountHandler,n=_().keyring,a=Object(c.useState)(""),r=Object(o.a)(a,2),s=r[0],i=r[1],l=function(){var e=Object(u.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createFromUri(t,null,"sr25519");case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=5;break}return e.next=3,l(s);case 3:n=e.sent,t(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-3 text-center",children:Object(C.jsx)(J.a,{children:Object(C.jsx)("h3",{children:"Please enter your 12 words mnemonic phrase to import your account!"})})}),Object(C.jsxs)(Q.a,{className:"justify-content-center align-items-center",children:[Object(C.jsx)(J.a,{style:{height:200},className:"d-flex flex-column justify-content-center align-items-center text-center",children:Object(C.jsx)("textarea",{className:"w-50 h-75",onChange:function(e){return i(e.target.value)},value:s})}),Object(C.jsx)("div",{className:"w-100"}),Object(C.jsx)(J.a,{className:"d-flex justify-content-end",children:Object(C.jsx)(Z,{onClick:function(){return d()},children:"Import"})})]})]})}var ge=n(860),ye=n(855),ve=n(0);var Ne=function(e){var t=e.address,n=e.genesisHash,a=e.isHashed,r=e.onSignature,s=e.payload,i=Object(c.useState)(null),l=Object(o.a)(i,2),j=l[0],u=l[1],d=Object(c.useCallback)((function(e){if(Object(ve.isHex)(e.signature))r(e);else{var t=e.signature,n=t.length>47?"".concat(t.substr(0,24),"\u2026").concat(t.substr(-22)):t;u("Non-signature, non-hex data received from QR. Data contains ".concat(n," instead of a hex-only signature. Please present the correct signature generated from the QR presented for submission."))}}),[r]);return t?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(Q.a,{children:[Object(C.jsx)(J.a,{children:Object(C.jsx)("div",{children:Object(C.jsx)(ge.a,{address:t,cmd:a?1:2,genesisHash:n,payload:s})})}),Object(C.jsx)(J.a,{children:Object(C.jsx)("div",{children:Object(C.jsx)(ye.a,{onScan:d})})})]}),Object(C.jsx)(Q.a,{children:Object(C.jsx)(J.a,{children:j&&Object(C.jsx)("div",{children:"sigError"})})})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{children:Object(C.jsx)(J.a,{children:"Preparing QR for signing"})}),Object(C.jsx)(K.a,{animation:"border"})]})};function we(){var e=Object(c.useContext)(ke),t=e.nextStep,n=e.setAccountSource,a=function(e){n(e),t()},r=[{selectHandler:function(){return a("IMPORTED_ACCOUNT")},label:"KeyStore or mnemonic phrase"},{selectHandler:function(){return a("EXTENSION_ACCOUNT")},label:"Polkadot extension"},{selectHandler:function(){return a("HARDWALLET_ACCOUNT")},label:"Hardware Wallet"},{selectHandler:function(){return a("SIGNER_ACCOUNT")},label:"Parity Signer"}];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-4",children:Object(C.jsx)(J.a,{children:Object(C.jsx)(M.b,{to:"/",children:Object(C.jsx)(Z,{children:"< Back"})})})}),Object(C.jsx)(Q.a,{className:"py-3",children:Object(C.jsx)(J.a,{className:"text-center",children:Object(C.jsx)("h1",{children:"How would you like to access your account?"})})}),Object(C.jsx)(Q.a,{children:Object(C.jsx)(be,{options:r})})]})}function Ce(e){var t=e.children,n=Object(c.useContext)(ke).jumpToStep;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"p-4",children:Object(C.jsx)(J.a,{children:Object(C.jsx)(Z,{onClick:function(){return n(0)},children:"< Back"})})}),Object(C.jsx)(Q.a,{className:"justify-content-center align-items-center",children:Object(C.jsx)(J.a,{className:"d-flex justify-content-center align-items-center",children:Object(C.jsx)(z.a,{style:{width:800,maxWidth:"100%"},className:"shadow",children:Object(C.jsx)(z.a.Body,{children:t})})})})]})}var ke=Object(c.createContext)();function Se(){var e,t,n=_(),a=n.apiState,r=n.api,s=n.keyring,i=G.removeGift,l=G.createGift,d=Object(c.useState)(0),b=Object(o.a)(d,2),O=b[0],h=b[1],x=Object(c.useState)(null),m=Object(o.a)(x,2),p=m[0],g=m[1],y=Object(c.useState)(null),v=Object(o.a)(y,2),N=v[0],w=v[1],k=Object(c.useState)(!1),S=Object(o.a)(k,2),E=S[0],A=S[1],R=Object(c.useState)(!1),T=Object(o.a)(R,2),H=T[0],P=T[1],I=Object(c.useState)(null),D=Object(o.a)(I,2),U=D[0],F=D[1],B=Object(c.useState)(""),L=Object(o.a)(B,2),K=L[0],M=L[1],V=Object(c.useState)({isQrHashed:!1,qrAddress:"",qrPayload:new Uint8Array}),Q=Object(o.a)(V,2),J=Q[0],z=J.isQrHashed,X=J.qrAddress,Z=J.qrPayload,$=J.qrResolve,ee=Q[1],te=Object(c.useState)(null),ne=Object(o.a)(te,2),ce=ne[0],ae=ne[1],re=function(){P(!1),A(!1),F(null),M("")},oe=function(e){re(),h(e)},ue=function(){oe(O+1)},de=function(e){oe(e)},be=0,Oe=Object(c.useCallback)((function(e){var t=e.signature;$&&$({id:++be,signature:t}),A(!1),P(!0)}),[$]),he=function(e){P(!1),M(null),F(e.message)},xe=function(e){var t=e.error;e.result;t?he(t):ue()},ge=function(e){var t=e.error;e.result;t?he(t):de(2)},ye=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,c,a,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t,s=null,!(null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.isExternal)){e.next=7;break}a=t.address,s=new Y(r.registry,ee),e.next=13;break;case 7:if(!(null===t||void 0===t||null===(c=t.meta)||void 0===c?void 0:c.isInjected)){e.next=13;break}return a=t.address,e.next=11,Object(f.web3FromSource)(t.meta.source);case 11:i=e.sent,s=null===i||void 0===i?void 0:i.signer;case 13:return e.abrupt("return",{pairOrAddress:a,signer:s});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,c,i,o,u,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("READY"===a){e.next=5;break}console.log("api not READY!"+a),window.alert("We were not able to connect to the blockchain!\nPlease Check if you have set the correct rpc address for the chain and in case you are using any adblockers make sure it is turned off!"),e.next=20;break;case 5:if(p){e.next=10;break}console.log("no account is selected"),window.alert("You need to sign in with your account to be able to send a gift \ud83d\udd11\ud83d\udd13"),e.next=20;break;case 10:return e.next=12,ye(p);case 12:c=e.sent,i=Object(W.mnemonicGenerate)(),o=t.name,u=s.createFromUri(i,{name:o},"sr25519"),d={to:u,amount:t.amount},l(r,c,d,xe),ae({secret:i,name:t.name||"",email:t.email||"",amount:t.amount}),(null===p||void 0===p||null===(n=p.meta)||void 0===n?void 0:n.isExternal)?A(!0):(M("Generating the gift on the blockchain..."),P(!0));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,c,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("READY"===a){e.next=5;break}console.log("api not READY!"+a),window.alert("We were not able to connect to the blockchain!\nPlease Check if you have set the correct rpc address for the chain and in case you are using any adblockers make sure it is turned off!"),e.next=18;break;case 5:if(p){e.next=10;break}console.log("no account is selected"),window.alert("You need to sign in with your account to be able to send a gift \ud83d\udd11\ud83d\udd13"),e.next=18;break;case 10:return e.next=12,ye(p);case 12:c=e.sent,o=t,l=s.createFromUri(o,{name:"interim_gift"},"sr25519"),i(r,c,{to:l},ge),(null===p||void 0===p||null===(n=p.meta)||void 0===n?void 0:n.isExternal)?A(!0):(M("Removing the gift from the blockchain..."),P(!0));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee={IMPORTED_ACCOUNT:pe,EXTENSION_ACCOUNT:se,HARDWALLET_ACCOUNT:ie,SIGNER_ACCOUNT:le};switch(O){case 1:e=Object(C.jsx)(Ce,{children:Object(c.createElement)(Ee[N],{setAccountHandler:function(e){e?(g(e),ue()):he(new Error("No account was selected, please login with your account!"))}})});break;case 2:e=Object(C.jsx)(fe,{account:p,generateGiftHandler:ve});break;case 3:e=Object(C.jsx)(me,{gift:ce,removeGiftHandler:Se});break;default:e=Object(C.jsx)(we,{})}return t=E?Object(C.jsx)(Ne,{address:X,genesisHash:r.genesisHash,isHashed:z,onSignature:Oe,payload:Z}):e,Object(C.jsxs)(ke.Provider,{value:{nextStep:ue,prevStep:function(){oe(O-1)},jumpToStep:de,setAccountSource:w},children:[t,Object(C.jsx)(je,{show:!!U,message:U,handleClose:function(){return re()}}),Object(C.jsx)(q,{show:!U&&H,message:K})]})}function Ee(){var e=Object(V.g)();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Q.a,{className:"mt-5 py-5",children:Object(C.jsx)(J.a,{className:"text-center",children:Object(C.jsx)("h1",{children:"There are no gifts better than some DOTs!"})})}),Object(C.jsxs)(Q.a,{xs:1,md:2,className:"mt-5 mx-auto justify-content-center align-items-center",children:[Object(C.jsx)(J.a,{xs:12,md:6,className:"d-flex justify-content-center align-items-center",children:Object(C.jsxs)(de,{onClick:function(){return e.push("/claim")},children:[Object(C.jsx)("h3",{children:"Claim"}),Object(C.jsx)("span",{children:"your gift"})]})}),Object(C.jsx)(J.a,{xs:12,md:6,className:"d-flex justify-content-center align-items-center",children:Object(C.jsxs)(de,{onClick:function(){return e.push("/generate")},children:[Object(C.jsx)("h3",{children:"Generate"}),Object(C.jsx)("span",{children:"a new gift"})]})})]})]})}function Ae(){var e=_().apiState;return Object(C.jsx)(i.a,{children:Object(C.jsxs)(M.a,{children:[Object(C.jsxs)(V.d,{children:[Object(C.jsx)(V.b,{path:"/claim",children:Object(C.jsx)(xe,{})}),Object(C.jsx)(V.b,{path:"/generate",children:Object(C.jsx)(Se,{})}),Object(C.jsx)(V.b,{exact:!0,path:"/",children:Object(C.jsx)(Ee,{})}),Object(C.jsx)(V.b,{path:"/",children:Object(C.jsx)(V.a,{to:"/"})})]}),Object(C.jsx)(q,{show:"READY"!==e,message:"Connecting to the blockchain network..."})]})})}function Re(){return Object(C.jsxs)(T,{children:[Object(C.jsx)(Ae,{}),Object(C.jsx)(U,{})]})}n(791);s.a.render(Object(C.jsx)(Re,{}),document.getElementById("root"))}},[[792,1,2]]]);
//# sourceMappingURL=main.f0277879.chunk.js.map